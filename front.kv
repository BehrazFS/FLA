<MyManager>:
    Screen1:
    Screen2:
    Screen3:
    Screen4:

<Screen1>:
    name: "input_sc"
    text1:states
    text2:alpha
    text3:stack_alpha
    BoxLayout:
        size_hint : 1,1
        orientation:"vertical"
        spacing:20
        padding:20
        canvas:
            Color:
                rgba: root.manager.bg_color()
            Rectangle:
                size:self.parent.size
        TextInput:
            size_hint:1,.2
            id : states
            multiline:False
            base_direction:'ltr'
            hint_text:"states"
            background_color: 0,0,0,1
            foreground_color:root.manager.font_color()
            font_size: '30sp'
            # top, bottom
            padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
        TextInput:
            size_hint:1,.2
            id : alpha
            multiline:False
            base_direction:'ltr'
            hint_text:"alphabets"
            background_color: 0,0,0,1
            foreground_color:root.manager.font_color()
            font_size: '30sp'
            # top, bottom
            padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
        TextInput:
            size_hint:1,.2
            id : stack_alpha
            multiline:False
            base_direction:'ltr'
            hint_text:"stack alphabets"
            background_color: 0,0,0,1
            foreground_color:root.manager.font_color()
            font_size: '30sp'
            # top, bottom
            padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
        Button:
            size_hint:1,.4
            color:root.manager.button_fcolor()
            background_color: root.manager.button_color()
            text : "next"
            font_size: 30
            on_press: root.manager.first(root.text1.text.split(","),root.text2.text.split(","),root.text3.text.split(","))
<Screen2>:
    name: "input2_sc"
    text1:state_0
    text2:alpha_base
    text3:accept
    BoxLayout:
        size_hint : 1,1
        orientation:"vertical"
        spacing:20
        padding:20
        canvas:
            Color:
                rgba:root.manager.bg_color()
            Rectangle:
                size:self.parent.size
        TextInput:
            size_hint:1,.2
            id : state_0
            multiline:False
            base_direction:'ltr'
            hint_text:"starting state"
            background_color: 0,0,0,1
            foreground_color:root.manager.font_color()
            font_size: '30sp'
            # top, bottom
            padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
        TextInput:
            size_hint:1,.2
            id : alpha_base
            multiline:False
            base_direction:'ltr'
            hint_text:"bottom of stack"
            background_color: 0,0,0,1
            foreground_color:root.manager.font_color()
            font_size: '30sp'
            # top, bottom
            padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
        TextInput:
            size_hint:1,.2
            id : accept
            multiline:False
            base_direction:'ltr'
            hint_text:"accepting states"
            background_color: 0,0,0,1
            foreground_color:root.manager.font_color()
            font_size: '30sp'
            # top, bottom
            padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
        Button:
            background_color: root.manager.button_color()
            size_hint:1,.3
            color:root.manager.button_fcolor()
            text : "next"
            font_size: 30
            on_press: root.manager.second(root.text1.text,root.text2.text,root.text3.text.split(","))
        Button:
            size_hint:1,.1
            background_color: root.manager.button_color()
            color:root.manager.button_fcolor()
            text : "back"
            font_size: 30
            on_press:
                root.manager.current = "input_sc"
                root.manager.transition.direction = "right"
<Screen3>:
    name: "rules_sc"
    text1:s1
    text2:s2
    text3:s3
    text4:s4
    text5:i5
    BoxLayout:
        size_hint : 1,1
        orientation:"vertical"
        spacing:10
        padding:20
        canvas:
            Color:
                rgba:root.manager.bg_color()
            Rectangle:
                size:self.parent.size
            Color:
                rgb:0,0,0
            Rectangle:
                size:self.parent.width -40 , 400
                pos:self.parent.x+20,self.parent.height - 420

        Label:
            size_hint:1,0.1
        BoxLayout:
            size_hint : 1,0.2
            orientation:"horizontal"
            spacing:0
            padding:50
            canvas:
                Color:
                    rgb:0,0,0
                Rectangle:
                    size:self.size
                    pos:self.pos
            Button:
                text:"δ ( "
                font_size: 30
                background_color:0,0,0,1
                color:root.manager.font_color()
            Spinner:
                id:s1
                values:root.manager.states
                text:"state"
                font_size: 25
                background_color:0,0,0,1
                color:root.manager.font_color()
            Button:
                text:","
                font_size: 30
                background_color:0,0,0,1
                color:root.manager.font_color()
            Spinner:
                id:s2
                text:"alpha"
                font_size: 25
                background_color:0,0,0,1
                color:root.manager.font_color()
                values:root.manager.alphabet
            Button:
                text:","
                font_size: 30
                background_color:0,0,0,1
                color:root.manager.font_color()
            Spinner:
                text:"stack"
                id:s3
                values:[i for i in root.manager.stack_alpha if i != "λ"]
                font_size: 25
                background_color:0,0,0,1
                color:root.manager.font_color()
            Button:
                text:") = ("
                font_size: 30
                background_color:0,0,0,1
                color:root.manager.font_color()
            Spinner:
                text:"state"
                id:s4
                values:root.manager.states
                font_size: 25
                background_color:0,0,0,1
                color:root.manager.font_color()
            Button:
                text:","
                font_size: 30
                background_color:0,0,0,1
                color:root.manager.font_color()

            TextInput:
                readonly: True
                size_hint:.9,1
                hint_text:"stack"
                id:i5
                multiline:False
                font_size: 20
                background_color:0,0,0,1
                foreground_color:root.manager.font_color()
            BoxLayout:
                MultiSelectSpinner:
                    text: '↓'
                    font_name: "DejaVuSans.ttf"
                    id: x6
                    values: [i for i in root.manager.stack_alpha] + ['del']
                    font_size: 25
                    background_color: 0, 0, 0, 1
                    color: root.manager.font_color()
                Button:
                    text:")"
                    font_size: 30
                    background_color:0,0,0,1
                    color:root.manager.font_color()
        BoxLayout:
            orientation:"vertical"
            size_hint:1,.7
            spacing:10
            Label:
            Button:
                size_hint:1,0.7
                text : "submit"
                background_color: root.manager.button_color()
                color:root.manager.button_fcolor()
                font_size: 30
                on_press: root.manager.fourth(root.text1.text,root.text2.text,root.text3.text,root.text4.text,root.text5.text.split(','))

            Button:
                size_hint:1,0.5
                color:root.manager.button_fcolor()
                background_color: root.manager.button_color()
                text : "next"
                font_size: 30
                on_press: root.manager.third()
            Button:
                size_hint:1,.3
                color:root.manager.button_fcolor()
                background_color: root.manager.button_color()
                text : "back"
                font_size: 30
                on_press:
                    root.manager.current = "input_sc"
                    root.manager.transition.direction = "right"

<MultiSelectOption@Button>:
    size_hint: 1, None
    height: '48dp'
<Screen4>:
    name: "run_sc"
    scroll:scroll
    txt:txt
    BoxLayout:
        orientation: "vertical"
        spacing:20
        padding:20
        canvas:
            Color:
                rgba:root.manager.bg_color()
            Rectangle:
                size:self.parent.size
        TextInput:
            id: txt
            multiline:False
            font_size: 30
            background_color:0,0,0,1
            foreground_color:root.manager.font_color()
        MyScrollView:
            # size_hint:1,1
            # do_scroll_x:False
            Button:
                id:scroll
                text:self.parent.text
                font_size: 20
                size_hint:1,None
                text_size: self.width, None
                size_hint_y: None
                height: self.texture_size[1]
                background_color:root.manager.button_color()
                multiline: True
                color:root.manager.button_fcolor()
                markup:True
        Button:
            size_hint:1,0.5
            text : "check"
            color:root.manager.button_fcolor()
            font_size: 30
            background_color: root.manager.button_color()
            on_press:
                root.manager.check(root.txt.text,root.scroll)
